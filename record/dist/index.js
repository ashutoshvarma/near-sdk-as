"use strict";
const as_1 = require("visitor-as/as");
const visitor_as_1 = require("visitor-as");
const utils_1 = require("visitor-as/dist/utils");
function isField(node) {
    return node.kind == as_1.NodeKind.FIELDDECLARATION;
}
function isInstanceField(node) {
    return isField(node) && node.is(as_1.CommonFlags.INSTANCE);
}
function getRecordId(element) {
    let decorator = (0, utils_1.getDecorator)(element, "record");
    if (decorator.args == null) {
        return element.name.text;
    }
    if (decorator.args.length > 1) {
        throw new Error(`record expects 0 or 1 argument but got ${decorator.args.length}`);
    }
    if (!decorator.args[0].isLiteralKind(as_1.LiteralKind.STRING)) {
        throw new Error("record expects a string argument");
    }
    return decorator.args[0].value;
}
class RecordDecorator extends visitor_as_1.ClassDecorator {
    constructor() {
        super(...arguments);
        this.pkDecoratorName = "primaryKey";
    }
    visitFieldDeclaration(node) {
        var _a;
        if (!node.name)
            return;
        if ((_a = node.decorators) === null || _a === void 0 ? void 0 : _a.find((d) => d.name.range.toString() === `@${this.pkDecoratorName}`)) {
            this.pkSmt = `return this.${node.name.text}.toString();`;
        }
    }
    visitMethodDeclaration(node) { }
    visitClassDeclaration(node) {
        const fields = node.members.filter(isInstanceField);
        if (fields.length === 0) {
            return;
        }
        console.log(fields.map(f => f.name.text));
        this.visit(fields);
        const name = (0, utils_1.getName)(node);
        const recordId = getRecordId(node);
        const methodsStr = getRecordMethods(recordId, name);
        if (this.pkSmt) {
            // we find some field with @primaryKey decorator
            methodsStr.push(getPkMethod(this.pkSmt));
        }
        else {
            if (!node.members.some((0, utils_1.isMethodNamed)("primaryKey"))) {
                throw new Error("record require either a field decorated with '@primaryKey' or method 'primaryKey(): string'");
            }
        }
        console.log(methodsStr.join("\n\n"));
        console.log("===================================================");
        methodsStr.forEach((e) => {
            const m = visitor_as_1.SimpleParser.parseClassMember(e, node);
            const mName = m.name.text;
            if (!node.members.some((0, utils_1.isMethodNamed)(mName))) {
                node.members.push(m);
            }
        });
    }
    get name() {
        return "record";
    }
}
const getPkMethod = (smt) => `
  primaryKey(): string {
    ${smt}
  }
`;
const getRecordMethods = (recordId, className) => [
    `
  static recordId(): string {
    return "${recordId}";
  }
  `,
    `
  exists(): bool {
    return ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).exists(this.primaryKey());
  }
  `,
    `
  save(): void {
    ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).add(
      this.primaryKey(),
      this
    );
  }
  `,
    `
  delete(): void {
    ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).delete(this.primaryKey());
  }
  `,
    `
  static findOne(pk: string): ${className} | null {
    return ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).findOne(pk);
  }
  `,
    `
  static find(pks?: string[]): Array<${className} | null> {
    return ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).find(pks);
  }
  `,
    `
  static getAll(): ${className}[] {
    return ActiveRecord.getOrCreateRecord<${className}>(${className}.recordId()).getAll();
  }
 `,
];
module.exports = (0, visitor_as_1.registerDecorator)(new RecordDecorator());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHNDQVN1QjtBQUN2QiwyQ0FBNkU7QUFFN0UsaURBQTZFO0FBRTdFLFNBQVMsT0FBTyxDQUFDLElBQTBCO0lBQ3pDLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxhQUFRLENBQUMsZ0JBQWdCLENBQUM7QUFDaEQsQ0FBQztBQUVELFNBQVMsZUFBZSxDQUFDLElBQTBCO0lBQ2pELE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsZ0JBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRUQsU0FBUyxXQUFXLENBQUMsT0FBeUI7SUFDNUMsSUFBSSxTQUFTLEdBQUcsSUFBQSxvQkFBWSxFQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNoRCxJQUFJLFNBQVMsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFO1FBQzFCLE9BQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7S0FDMUI7SUFDRCxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUM3QixNQUFNLElBQUksS0FBSyxDQUNiLDBDQUEwQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUNsRSxDQUFDO0tBQ0g7SUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsZ0JBQVcsQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUN4RCxNQUFNLElBQUksS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7S0FDckQ7SUFDRCxPQUFpQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBRSxDQUFDLEtBQUssQ0FBQztBQUM1RCxDQUFDO0FBRUQsTUFBTSxlQUFnQixTQUFRLDJCQUFjO0lBQTVDOztRQUNFLG9CQUFl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QVMsS0FBSyxTQUFTOztHQUV6RDtJQUNEO2dDQUM4QixTQUFTOzRDQUNHLFNBQVMsS0FBSyxTQUFTOztHQUVoRTtJQUNEO3VDQUNxQyxTQUFTOzRDQUNKLFNBQVMsS0FBSyxTQUFTOztHQUVoRTtJQUNEO3FCQUNtQixTQUFTOzRDQUNjLFNBQVMsS0FBSyxTQUFTOztFQUVqRTtDQUNELENBQUM7QUFFRixpQkFBUyxJQUFBLDhCQUFpQixFQUFDLElBQUksZUFBZSxFQUFFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENsYXNzRGVjbGFyYXRpb24sXG4gIENvbW1vbkZsYWdzLFxuICBGaWVsZERlY2xhcmF0aW9uLFxuICBNZXRob2REZWNsYXJhdGlvbixcbiAgTGl0ZXJhbEtpbmQsXG4gIFN0cmluZ0xpdGVyYWxFeHByZXNzaW9uLFxuICBOb2RlS2luZCxcbiAgRGVjbGFyYXRpb25TdGF0ZW1lbnQsXG59IGZyb20gXCJ2aXNpdG9yLWFzL2FzXCI7XG5pbXBvcnQgeyByZWdpc3RlckRlY29yYXRvciwgQ2xhc3NEZWNvcmF0b3IsIFNpbXBsZVBhcnNlciB9IGZyb20gXCJ2aXNpdG9yLWFzXCI7XG5cbmltcG9ydCB7IGdldERlY29yYXRvciwgZ2V0TmFtZSwgaXNNZXRob2ROYW1lZCB9IGZyb20gXCJ2aXNpdG9yLWFzL2Rpc3QvdXRpbHNcIjtcblxuZnVuY3Rpb24gaXNGaWVsZChub2RlOiBEZWNsYXJhdGlvblN0YXRlbWVudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gbm9kZS5raW5kID09IE5vZGVLaW5kLkZJRUxEREVDTEFSQVRJT047XG59XG5cbmZ1bmN0aW9uIGlzSW5zdGFuY2VGaWVsZChub2RlOiBEZWNsYXJhdGlvblN0YXRlbWVudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNGaWVsZChub2RlKSAmJiBub2RlLmlzKENvbW1vbkZsYWdzLklOU1RBTkNFKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmVjb3JkSWQoZWxlbWVudDogQ2xhc3NEZWNsYXJhdGlvbik6IHN0cmluZyB7XG4gIGxldCBkZWNvcmF0b3IgPSBnZXREZWNvcmF0b3IoZWxlbWVudCwgXCJyZWNvcmRcIik7XG4gIGlmIChkZWNvcmF0b3IuYXJncyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQubmFtZS50ZXh0O1xuICB9XG4gIGlmIChkZWNvcmF0b3IuYXJncy5sZW5ndGggPiAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYHJlY29yZCBleHBlY3RzIDAgb3IgMSBhcmd1bWVudCBidXQgZ290ICR7ZGVjb3JhdG9yLmFyZ3MubGVuZ3RofWBcbiAgICApO1xuICB9XG4gIGlmICghZGVjb3JhdG9yLmFyZ3NbMF0uaXNMaXRlcmFsS2luZChMaXRlcmFsS2luZC5TVFJJTkcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwicmVjb3JkIGV4cGVjdHMgYSBzdHJpbmcgYXJndW1lbnRcIik7XG4gIH1cbiAgcmV0dXJuICg8U3RyaW5nTGl0ZXJhbEV4cHJlc3Npb24+ZGVjb3JhdG9yLmFyZ3NbMF0pLnZhbHVlO1xufVxuXG5jbGFzcyBSZWNvcmREZWNvcmF0b3IgZXh0ZW5kcyBDbGFzc0RlY29yYXRvciB7XG4gIHBrRGVjb3JhdG9yTmFtZTogc3RyaW5nID0gXCJwcmltYXJ5S2V5XCI7XG4gIHBrU210Pzogc3RyaW5nO1xuXG4gIHZpc2l0RmllbGREZWNsYXJhdGlvbihub2RlOiBGaWVsZERlY2xhcmF0aW9uKTogdm9pZCB7XG4gICAgaWYgKCFub2RlLm5hbWUpIHJldHVybjtcbiAgICBpZiAoXG4gICAgICBub2RlLmRlY29yYXRvcnM/LmZpbmQoXG4gICAgICAgIChkKSA9PiBkLm5hbWUucmFuZ2UudG9TdHJpbmcoKSA9PT0gYEAke3RoaXMucGtEZWNvcmF0b3JOYW1lfWBcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHRoaXMucGtTbXQgPSBgcmV0dXJuIHRoaXMuJHtub2RlLm5hbWUudGV4dH0udG9TdHJpbmcoKTtgO1xuICAgIH1cbiAgfVxuXG4gIHZpc2l0TWV0aG9kRGVjbGFyYXRpb24obm9kZTogTWV0aG9kRGVjbGFyYXRpb24pOiB2b2lkIHt9XG5cbiAgdmlzaXRDbGFzc0RlY2xhcmF0aW9uKG5vZGU6IENsYXNzRGVjbGFyYXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBmaWVsZHMgPSBub2RlLm1lbWJlcnMuZmlsdGVyKGlzSW5zdGFuY2VGaWVsZCk7XG4gICAgaWYgKGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coZmllbGRzLm1hcChmID0+IGYubmFtZS50ZXh0KSlcbiAgICB0aGlzLnZpc2l0KGZpZWxkcyk7XG5cbiAgICBjb25zdCBuYW1lID0gZ2V0TmFtZShub2RlKTtcbiAgICBjb25zdCByZWNvcmRJZCA9IGdldFJlY29yZElkKG5vZGUpO1xuICAgIGNvbnN0IG1ldGhvZHNTdHIgPSBnZXRSZWNvcmRNZXRob2RzKHJlY29yZElkLCBuYW1lKTtcblxuICAgIGlmICh0aGlzLnBrU210KSB7XG4gICAgICAvLyB3ZSBmaW5kIHNvbWUgZmllbGQgd2l0aCBAcHJpbWFyeUtleSBkZWNvcmF0b3JcbiAgICAgIG1ldGhvZHNTdHIucHVzaChnZXRQa01ldGhvZCh0aGlzLnBrU210KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghbm9kZS5tZW1iZXJzLnNvbWUoaXNNZXRob2ROYW1lZChcInByaW1hcnlLZXlcIikpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcInJlY29yZCByZXF1aXJlIGVpdGhlciBhIGZpZWxkIGRlY29yYXRlZCB3aXRoICdAcHJpbWFyeUtleScgb3IgbWV0aG9kICdwcmltYXJ5S2V5KCk6IHN0cmluZydcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKG1ldGhvZHNTdHIuam9pbihcIlxcblxcblwiKSk7XG4gICAgY29uc29sZS5sb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIilcblxuICAgIG1ldGhvZHNTdHIuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgY29uc3QgbSA9IFNpbXBsZVBhcnNlci5wYXJzZUNsYXNzTWVtYmVyKGUsIG5vZGUpO1xuICAgICAgY29uc3QgbU5hbWUgPSBtLm5hbWUudGV4dDtcbiAgICAgIGlmICghbm9kZS5tZW1iZXJzLnNvbWUoaXNNZXRob2ROYW1lZChtTmFtZSkpKSB7XG4gICAgICAgIG5vZGUubWVtYmVycy5wdXNoKG0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJyZWNvcmRcIjtcbiAgfVxufVxuXG5jb25zdCBnZXRQa01ldGhvZCA9IChzbXQ6IHN0cmluZykgPT4gYFxuICBwcmltYXJ5S2V5KCk6IHN0cmluZyB7XG4gICAgJHtzbXR9XG4gIH1cbmA7XG5cbmNvbnN0IGdldFJlY29yZE1ldGhvZHMgPSAocmVjb3JkSWQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpID0+IFtcbiAgYFxuICBzdGF0aWMgcmVjb3JkSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCIke3JlY29yZElkfVwiO1xuICB9XG4gIGAsXG4gIGBcbiAgZXhpc3RzKCk6IGJvb2wge1xuICAgIHJldHVybiBBY3RpdmVSZWNvcmQuZ2V0T3JDcmVhdGVSZWNvcmQ8JHtjbGFzc05hbWV9Pigke2NsYXNzTmFtZX0ucmVjb3JkSWQoKSkuZXhpc3RzKHRoaXMucHJpbWFyeUtleSgpKTtcbiAgfVxuICBgLFxuICBgXG4gIHNhdmUoKTogdm9pZCB7XG4gICAgQWN0aXZlUmVjb3JkLmdldE9yQ3JlYXRlUmVjb3JkPCR7Y2xhc3NOYW1lfT4oJHtjbGFzc05hbWV9LnJlY29yZElkKCkpLmFkZChcbiAgICAgIHRoaXMucHJpbWFyeUtleSgpLFxuICAgICAgdGhpc1xuICAgICk7XG4gIH1cbiAgYCxcbiAgYFxuICBkZWxldGUoKTogdm9pZCB7XG4gICAgQWN0aXZlUmVjb3JkLmdldE9yQ3JlYXRlUmVjb3JkPCR7Y2xhc3NOYW1lfT4oJHtjbGFzc05hbWV9LnJlY29yZElkKCkpLmRlbGV0ZSh0aGlzLnByaW1hcnlLZXkoKSk7XG4gIH1cbiAgYCxcbiAgYFxuICBzdGF0aWMgZmluZE9uZShwazogc3RyaW5nKTogJHtjbGFzc05hbWV9IHwgbnVsbCB7XG4gICAgcmV0dXJuIEFjdGl2ZVJlY29yZC5nZXRPckNyZWF0ZVJlY29yZDwke2NsYXNzTmFtZX0+KCR7Y2xhc3NOYW1lfS5yZWNvcmRJZCgpKS5maW5kT25lKHBrKTtcbiAgfVxuICBgLFxuICBgXG4gIHN0YXRpYyBmaW5kKHBrcz86IHN0cmluZ1tdKTogQXJyYXk8JHtjbGFzc05hbWV9IHwgbnVsbD4ge1xuICAgIHJldHVybiBBY3RpdmVSZWNvcmQuZ2V0T3JDcmVhdGVSZWNvcmQ8JHtjbGFzc05hbWV9Pigke2NsYXNzTmFtZX0ucmVjb3JkSWQoKSkuZmluZChwa3MpO1xuICB9XG4gIGAsXG4gIGBcbiAgc3RhdGljIGdldEFsbCgpOiAke2NsYXNzTmFtZX1bXSB7XG4gICAgcmV0dXJuIEFjdGl2ZVJlY29yZC5nZXRPckNyZWF0ZVJlY29yZDwke2NsYXNzTmFtZX0+KCR7Y2xhc3NOYW1lfS5yZWNvcmRJZCgpKS5nZXRBbGwoKTtcbiAgfVxuIGAsXG5dO1xuXG5leHBvcnQgPSByZWdpc3RlckRlY29yYXRvcihuZXcgUmVjb3JkRGVjb3JhdG9yKCkpO1xuIl19